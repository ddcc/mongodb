selector:
  js_test:
    roots:
    - jstests/replsets/*.js
    exclude_files:
    - jstests/replsets/config_server_checks.js
    - jstests/replsets/disallow_adding_initialized_node1.js
    - jstests/replsets/disallow_adding_initialized_node2.js
    - jstests/replsets/last_op_visible.js
    - jstests/replsets/oplog_truncated_on_recovery.js
    - jstests/replsets/priority_takeover_cascading_priorities.js
    - jstests/replsets/priority_takeover_one_node_higher_priority.js
    - jstests/replsets/priority_takeover_two_nodes_equal_priority.js
    - jstests/replsets/read_committed*.js
    - jstests/replsets/read_majority_two_arbs.js
    # The combination of new bridges and PV0 can lead to an improper spanning tree in sync2.js.
    - jstests/replsets/sync2.js
    # PV0 does not persist the last vote
    - jstests/replsets/last_vote.js
    # PV0's w:majority guarantees aren't strong enough for this test to pass.
    - jstests/replsets/write_concern_after_stepdown_and_stepup.js
    # This test expects the server to log a PV1-only vote-not-granted reason
    - jstests/replsets/no_flapping_during_network_partition.js
    # This test requires terms.
    - jstests/replsets/rollback_too_new.js

executor:
  js_test:
    config:
      shell_options:
        global_vars:
          TestData:
            useLegacyReplicationProtocol: true
        nodb: ''
