# -*- mode: python -*-

Import("env")

# These commands are linked both in MongoS and MongoD
env.Library(
    target='shared_cluster_commands',
    source=[
        'cluster_get_shard_map_cmd.cpp',
    ],
    LIBDEPS=[
        '$BUILD_DIR/mongo/db/commands',
        '$BUILD_DIR/mongo/s/client/sharding_client',
        '$BUILD_DIR/mongo/s/coreshard',
    ]
)

# These commands are linked in MongoS only
env.Library(
    target='cluster_commands',
    source=[
        'cluster_add_shard_cmd.cpp',
        'cluster_commands_common.cpp',
        'cluster_count_cmd.cpp',
        'cluster_current_op.cpp',
        'cluster_db_stats_cmd.cpp',
        'cluster_drop_database_cmd.cpp',
        'cluster_enable_sharding_cmd.cpp',
        'cluster_explain_cmd.cpp',
        'cluster_find_cmd.cpp',
        'cluster_find_and_modify_cmd.cpp',
        'cluster_flush_router_config_cmd.cpp',
        'cluster_fsync_cmd.cpp',
        'cluster_ftdc_commands.cpp',
        'cluster_get_last_error_cmd.cpp',
        'cluster_get_prev_error_cmd.cpp',
        'cluster_get_shard_version_cmd.cpp',
        'cluster_getmore_cmd.cpp',
        'cluster_index_filter_cmd.cpp',
        'cluster_is_db_grid_cmd.cpp',
        'cluster_is_master_cmd.cpp',
        'cluster_killcursors_cmd.cpp',
        'cluster_kill_op.cpp',
        'cluster_list_databases_cmd.cpp',
        'cluster_list_shards_cmd.cpp',
        'cluster_map_reduce_cmd.cpp',
        'cluster_merge_chunks_cmd.cpp',
        'cluster_move_chunk_cmd.cpp',
        'cluster_move_primary_cmd.cpp',
        'cluster_netstat_cmd.cpp',
        'cluster_pipeline_cmd.cpp',
        'cluster_plan_cache_cmd.cpp',
        'cluster_profile_cmd.cpp',
        'cluster_remove_shard_cmd.cpp',
        'cluster_repair_database_cmd.cpp',
        'cluster_repl_set_get_status_cmd.cpp',
        'cluster_reset_error_cmd.cpp',
        'cluster_shard_collection_cmd.cpp',
        'cluster_shutdown_cmd.cpp',
        'cluster_split_collection_cmd.cpp',
        'cluster_user_management_commands.cpp',
        'cluster_whats_my_uri_cmd.cpp',
        'cluster_write_cmd.cpp',
        'commands_public.cpp',
        'run_on_all_shards_cmd.cpp',
    ],
    LIBDEPS=[
        '$BUILD_DIR/mongo/client/parallel',
        '$BUILD_DIR/mongo/db/commands/apply_ops_cmd_common',
        '$BUILD_DIR/mongo/db/pipeline/pipeline',
        '$BUILD_DIR/mongo/db/commands/killcursors_common',
        '$BUILD_DIR/mongo/s/coreshard',
        '$BUILD_DIR/mongo/s/mongoscore',
    ]
)
